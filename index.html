
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO & Metadata -->
    <title>SheetBlog - Modern CMS Spreadsheet</title>
    <meta name="description" content="Platform blog modern bertenaga Google Sheets. Cepat, SEO-friendly, dan tanpa database SQL. Kelola konten Anda langsung dari spreadsheet.">
    <meta name="keywords" content="CMS Spreadsheet, Blog Google Sheets, React CMS No-Build, Website Statis Cepat, SheetBlog">
    <meta name="author" content="SheetBlog Studio">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://sheetblog.pages.dev/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://sheetblog.pages.dev/">
    <meta property="og:title" content="SheetBlog - Modern CMS Spreadsheet">
    <meta property="og:description" content="Kelola konten website Anda langsung dari Google Sheets. Solusi CMS tercepat dan termudah untuk pemula.">
    <meta property="og:image" content="https://images.unsplash.com/photo-1517694712202-14dd9538aa97?auto=format&fit=crop&q=80&w=1200">

    <!-- Twitter Card -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="SheetBlog - Modern CMS Spreadsheet">
    <meta property="twitter:description" content="Website otomatis dari Spreadsheet.">
    <meta property="twitter:image" content="https://images.unsplash.com/photo-1517694712202-14dd9538aa97?auto=format&fit=crop&q=80&w=1200">

    <!-- Favicon (Emoji ðŸš€) -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸš€</text></svg>">

    <!-- Schema.org JSON-LD -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "SheetBlog",
      "url": "https://sheetblog.pages.dev/",
      "description": "CMS Berbasis Spreadsheet No-Build"
    }
    </script>

    <!-- Library CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: 'var(--primary-50)',
                            100: 'var(--primary-100)',
                            500: 'var(--primary-500)',
                            600: 'var(--primary-600)',
                            700: 'var(--primary-700)',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        :root {
            --primary-50: #f0f9ff;
            --primary-100: #e0f2fe;
            --primary-500: #0ea5e9;
            --primary-600: #0284c7;
            --primary-700: #0369a1;
        }
        body { font-family: 'Inter', sans-serif; transition: background-color 0.3s ease; scroll-behavior: smooth; }
        .prose h2 { scroll-margin-top: 100px; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        .dark ::-webkit-scrollbar-thumb { background: #475569; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 dark:bg-slate-900 dark:text-slate-100 min-h-screen">
    <div id="root"></div>

    <!-- Logic Aplikasi React (Mandiri dalam HTML) -->
    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useMemo } from 'https://esm.sh/react@19';
        import ReactDOM from 'https://esm.sh/react-dom@19/client';
        import { HashRouter, Routes, Route, Link, useParams, Navigate, useLocation } from 'https://esm.sh/react-router-dom@7';
        import { marked } from 'https://esm.sh/marked@12';

        const DEFAULT_CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRyPo15zAs0lpBImncFFCVRgQ7IdXFCdBI5DgPcdmjLWtLduIvW-bPHodS3BYlfL7pq_n0BCSB5YwCU/pub?gid=0&single=true&output=csv';

        const COLOR_MAP = {
            blue: { 50: '#f0f9ff', 100: '#e0f2fe', 500: '#0ea5e9', 600: '#0284c7', 700: '#0369a1' },
            red: { 50: '#fef2f2', 100: '#fee2e2', 500: '#ef4444', 600: '#dc2626', 700: '#b91c1c' },
            green: { 50: '#f0fdf4', 100: '#dcfce7', 500: '#22c55e', 600: '#16a34a', 700: '#15803d' },
            purple: { 50: '#faf5ff', 100: '#f3e8ff', 500: '#a855f7', 600: '#9333ea', 700: '#7e22ce' },
            orange: { 50: '#fff7ed', 100: '#ffedd5', 500: '#f97316', 600: '#ea580c', 700: '#c2410c' }
        };

        function parseCSVLine(line) {
            const result = [];
            let curValue = "";
            let inQuotes = false;
            for (let i = 0; i < line.length; i++) {
                const char = line[i];
                if (char === '"') {
                    if (inQuotes && line[i + 1] === '"') { curValue += '"'; i++; } 
                    else { inQuotes = !inQuotes; }
                } else if (char === ',' && !inQuotes) {
                    result.push(curValue);
                    curValue = "";
                } else { curValue += char; }
            }
            result.push(curValue);
            return result;
        }

        async function fetchSheetData() {
            try {
                const response = await fetch(`${DEFAULT_CSV_URL}&t=${new Date().getTime()}`);
                const text = await response.text();
                const lines = text.split(/\r?\n/).filter(line => line.trim() !== "");
                if (lines.length === 0) return [];
                const headers = parseCSVLine(lines[0]).map(h => h.trim());
                const keyMap = { 'Judul': 'judul', 'Label': 'label', 'Gambar': 'gambar', 'Body': 'body', 'Slug': 'slug', 'Status': 'status', 'Tipe': 'tipe' };
                return lines.slice(1).map(line => {
                    const values = parseCSVLine(line);
                    const obj = {};
                    headers.forEach((header, index) => {
                        const key = keyMap[header] || header;
                        obj[key] = (values[index] || '').trim();
                    });
                    return obj;
                }).filter(p => p.status === 'Publish');
            } catch (e) { return []; }
        }

        const Header = ({ darkMode, setDarkMode, themeColor, setThemeColor }) => {
            const [isThemeOpen, setIsThemeOpen] = useState(false);
            return (
                <header className="sticky top-0 z-50 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800">
                    <div className="container mx-auto px-4 flex items-center justify-between h-16">
                        <Link to="/" className="text-2xl font-black bg-gradient-to-r from-primary-600 to-primary-400 bg-clip-text text-transparent">SheetBlog</Link>
                        <div className="flex items-center space-x-4">
                            <Link to="/about" className="text-sm font-bold hover:text-primary-500 transition hidden sm:block">Tentang</Link>
                            <button onClick={() => setIsThemeOpen(!isThemeOpen)} className="p-2 rounded-xl bg-slate-50 dark:bg-slate-800 text-slate-500 border dark:border-slate-700">
                                <i className="fas fa-palette"></i>
                            </button>
                            <button onClick={() => setDarkMode(!darkMode)} className="p-2 rounded-xl bg-slate-50 dark:bg-slate-800 text-slate-500 border dark:border-slate-700">
                                <i className={`fas ${darkMode ? 'fa-sun text-yellow-500' : 'fa-moon'}`}></i>
                            </button>
                        </div>
                        {isThemeOpen && (
                            <div className="absolute right-4 top-16 p-3 bg-white dark:bg-slate-800 border dark:border-slate-700 rounded-2xl shadow-2xl flex gap-2 z-[100]">
                                {Object.keys(COLOR_MAP).map(c => (
                                    <button key={c} onClick={() => {setThemeColor(c); setIsThemeOpen(false);}} className="w-8 h-8 rounded-full" style={{backgroundColor: COLOR_MAP[c][500]}} />
                                ))}
                            </div>
                        )}
                    </div>
                </header>
            );
        };

        const Home = ({ posts }) => (
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 py-10">
                {posts.filter(p => p.tipe === 'Post').map((post, i) => (
                    <article key={i} className="bg-white dark:bg-slate-800 rounded-3xl overflow-hidden shadow-sm border dark:border-slate-700 flex flex-col h-full hover:shadow-xl transition">
                        <Link to={`/post/${post.slug}`} className="aspect-video overflow-hidden">
                            <img src={post.gambar} alt={post.judul} className="w-full h-full object-cover" />
                        </Link>
                        <div className="p-6 flex flex-col flex-grow">
                            <span className="text-[10px] font-black text-primary-500 uppercase tracking-widest mb-2">{post.label}</span>
                            <h2 className="text-xl font-bold mb-4 line-clamp-2">{post.judul}</h2>
                            <Link to={`/post/${post.slug}`} className="mt-auto text-sm font-black text-primary-600 uppercase tracking-widest">Baca Selengkapnya</Link>
                        </div>
                    </article>
                ))}
            </div>
        );

        const PostDetail = ({ posts }) => {
            const { slug } = useParams();
            const [content, setContent] = useState('');
            const isLocal = slug === 'about' || slug === 'guide_stup';
            const post = posts.find(p => p.slug === slug);

            useEffect(() => {
                window.scrollTo(0,0);
                if (isLocal) {
                    fetch(`./${slug}.md`).then(r => r.text()).then(t => setContent(marked.parse(t)));
                }
            }, [slug, isLocal]);

            if (!post && !isLocal) return <div className="py-20 text-center">Data tidak ditemukan.</div>;

            return (
                <div className="max-w-4xl mx-auto py-10 px-4">
                    <h1 className="text-4xl md:text-6xl font-black mb-10 text-center">{isLocal ? (slug === 'about' ? 'Tentang' : 'Panduan') : post.judul}</h1>
                    <img src={isLocal ? 'https://images.unsplash.com/photo-1517694712202-14dd9538aa97' : post.gambar} className="w-full aspect-video object-cover rounded-[2.5rem] mb-12 shadow-xl" />
                    <div className="prose prose-lg dark:prose-invert max-w-none" dangerouslySetInnerHTML={{ __html: isLocal ? content : post.body }} />
                </div>
            );
        };

        const App = () => {
            const [posts, setPosts] = useState([]);
            const [loading, setLoading] = useState(true);
            const [darkMode, setDarkMode] = useState(localStorage.theme === 'dark');
            const [themeColor, setThemeColor] = useState(localStorage.themeColor || 'blue');

            useEffect(() => {
                fetchSheetData().then(d => { setPosts(d); setLoading(false); });
            }, []);

            useEffect(() => {
                document.documentElement.classList.toggle('dark', darkMode);
                localStorage.theme = darkMode ? 'dark' : 'light';
            }, [darkMode]);

            useEffect(() => {
                const p = COLOR_MAP[themeColor];
                const r = document.documentElement;
                Object.keys(p).forEach(k => r.style.setProperty(`--primary-${k}`, p[k]));
                localStorage.themeColor = themeColor;
            }, [themeColor]);

            if (loading) return <div className="h-screen flex items-center justify-center font-black uppercase tracking-[0.5em] text-primary-500 animate-pulse">SheetBlog Loading...</div>;

            return (
                <HashRouter>
                    <Header darkMode={darkMode} setDarkMode={setDarkMode} themeColor={themeColor} setThemeColor={setThemeColor} />
                    <main className="container mx-auto px-4 min-h-screen">
                        <Routes>
                            <Route path="/" element={<Home posts={posts} />} />
                            <Route path="/post/:slug" element={<PostDetail posts={posts} />} />
                            <Route path="/:slug" element={<PostDetail posts={posts} />} />
                        </Routes>
                    </main>
                    <footer className="py-10 border-t text-center text-[10px] font-bold uppercase tracking-widest text-slate-400">
                        &copy; {new Date().getFullYear()} SheetBlog Studio. All In One HTML.
                    </footer>
                </HashRouter>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
