
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO & Metadata Pro -->
    <title>SheetBlog Pro - Master Edition</title>
    <meta name="description" content="Premium CMS Spreadsheet dengan fitur Shortcodes, Anti-Adblock, TOC Otomatis, dan Layout Grid/List.">
    <meta name="keywords" content="SheetBlog Pro, Spreadsheet CMS, SEO Friendly Blog, Premium Spreadsheet Template">
    <meta name="author" content="SheetBlog Studio">
    
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="SheetBlog Pro - Master Edition">
    <meta property="og:description" content="Solusi blog tercepat dengan Google Sheets sebagai backend.">
    <meta property="og:image" content="https://images.unsplash.com/photo-1496181133206-80ce9b88a853?auto=format&fit=crop&q=80&w=1200">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>âš¡</text></svg>">

    <!-- Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['Plus Jakarta Sans', 'sans-serif'] },
                    colors: {
                        primary: { 50:'#f0f9ff', 100:'#e0f2fe', 500:'#0ea5e9', 600:'#0284c7', 700:'#0369a1' }
                    }
                }
            }
        }
    </script>
    <style>
        :root { 
            --bg-body: #f5f6f8; --bg-content: #ffffff;
            --text-primary: #1d2129; --text-secondary: #666;
            --primary-500:#0ea5e9; --primary-600:#0284c7;
            --warna-border: #e3e6ea;
            --note-info-bg: #e1f5fe; --note-info-text: #0277bd;
            --note-success-bg: #e8f5e9; --note-success-text: #2e7d32;
            --note-warning-bg: #fff3e0; --note-warning-text: #ef6c00;
            --note-danger-bg: #ffebee; --note-danger-text: #c62828;
        }
        .dark {
            --bg-body: #0f172a; --bg-content: #1e293b;
            --text-primary: #f8fafc; --text-secondary: #94a3b8;
            --warna-border: #334155;
            --note-info-bg: #0c4a6e; --note-info-text: #bae6fd;
            --note-success-bg: #064e3b; --note-success-text: #a7f3d0;
            --note-warning-bg: #78350f; --note-warning-text: #fde68a;
            --note-danger-bg: #7f1d1d; --note-danger-text: #fecaca;
        }

        body { background-color: var(--bg-body); color: var(--text-primary); transition: background-color 0.3s ease; scroll-behavior: smooth; }
        .ad-placeholder { background: repeating-linear-gradient(45deg, #f8fafc, #f8fafc 10px, #f1f5f9 10px, #f1f5f9 20px); border: 1px dashed #cbd5e1; }
        .dark .ad-placeholder { background: repeating-linear-gradient(45deg, #1e293b, #1e293b 10px, #0f172a 10px, #0f172a 20px); border-color: #334155; }
        .sticky-widget { position: sticky; top: 100px; }
        
        /* --- SHORTCODES --- */
        .btn-group { display: flex; gap: 10px; flex-wrap: wrap; margin: 20px 0; }
        .btn { display: inline-flex; align-items: center; justify-content: center; padding: 10px 20px; border-radius: 8px; font-weight: 700; font-size: 14px; text-decoration: none !important; transition: 0.3s; cursor: pointer; border: 2px solid transparent; }
        .btn.solid { background: var(--primary-600); color: #fff !important; }
        .btn.outline { background: transparent; color: var(--primary-600) !important; border-color: var(--primary-600); }
        .btn.sm { padding: 6px 12px; font-size: 12px; }
        .btn.lg { padding: 14px 28px; font-size: 16px; }

        .note { padding: 18px; border-radius: 12px; margin-bottom: 20px; font-size: 14px; line-height: 1.6; border-left: 5px solid; display: flex; align-items: flex-start; gap: 12px; }
        .note strong { display: block; margin-bottom: 4px; font-size: 15px; text-transform: uppercase; letter-spacing: 0.5px; }
        .note.info { background: var(--note-info-bg); color: var(--note-info-text); border-color: var(--note-info-text); }
        .note.success { background: var(--note-success-bg); color: var(--note-success-text); border-color: var(--note-success-text); }
        .note.warning { background: var(--note-warning-bg); color: var(--note-warning-text); border-color: var(--note-warning-text); }
        .note.danger { background: var(--note-danger-bg); color: var(--note-danger-text); border-color: var(--note-danger-text); }

        details.acc { background: var(--bg-body); border: 1px solid var(--warna-border); border-radius: 12px; margin-bottom: 12px; overflow: hidden; }
        details.acc summary { padding: 15px; cursor: pointer; font-weight: 800; background: var(--bg-content); list-style: none; display: flex; justify-content: space-between; align-items: center; }
        details.acc summary::after { content: '\f067'; font-family: 'Font Awesome 6 Free'; font-weight: 900; font-size: 12px; transition: 0.3s; }
        details.acc[open] summary::after { transform: rotate(45deg); }
        details.acc div { padding: 20px; font-size: 14px; background: var(--bg-content); border-top: 1px solid var(--warna-border); }

        pre.code-box { background: #1e1e1e; color: #d4d4d4; padding: 20px; border-radius: 12px; overflow-x: auto; font-family: 'Consolas', monospace; position: relative; margin: 25px 0; border: 1px solid #333; }
        pre.code-box::before { content: attr(data-lang); position: absolute; top: 0; right: 0; background: #333; color: #fff; padding: 4px 12px; font-size: 10px; border-bottom-left-radius: 8px; font-weight: 800; text-transform: uppercase; }

        .badge { display: inline-block; padding: 2px 8px; border-radius: 4px; font-size: 9px; font-weight: 900; text-transform: uppercase; color: #fff; vertical-align: middle; margin-left: 5px; }
        .badge.blue { background: #0ea5e9; } .badge.red { background: #ef4444; } .badge.green { background: #22c55e; }

        .ads-banner { height: 1px; width: 1px; position: absolute; left: -1000px; top: -1000px; }
    </style>
</head>
<body class="selection:bg-primary-500 selection:text-white">
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useMemo, useRef } from 'https://esm.sh/react@19';
        import ReactDOM from 'https://esm.sh/react-dom@19/client';
        import { BrowserRouter, Routes, Route, Link, useParams, Navigate, useLocation } from 'https://esm.sh/react-router-dom@7';
        import { marked } from 'https://esm.sh/marked@12';

        const DEFAULT_CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRyPo15zAs0lpBImncFFCVRgQ7IdXFCdBI5DgPcdmjLWtLduIvW-bPHodS3BYlfL7pq_n0BCSB5YwCU/pub?gid=0&single=true&output=csv';

        // --- Core Helpers ---
        const parseCSV = (text) => {
            const lines = text.split(/\r?\n/).filter(l => l.trim() !== "");
            if (lines.length < 2) return [];
            
            // Header mapping robust (case-insensitive)
            const rawHeaders = lines[0].split(',').map(h => h.trim().replace(/"/g, ''));
            const keyMap = { 
                'judul': 'judul', 
                'label': 'label', 
                'gambar': 'gambar', 
                'body': 'body', 
                'slug': 'slug', 
                'status': 'status', 
                'tipe': 'tipe', 
                'meta deskripsi': 'desc',
                'meta_deskripsi': 'desc'
            };

            return lines.slice(1).map(line => {
                const values = []; let current = ""; let inQuotes = false;
                for (let i = 0; i < line.length; i++) {
                    const c = line[i]; if (c === '"') inQuotes = !inQuotes;
                    else if (c === ',' && !inQuotes) { values.push(current); current = ""; }
                    else current += c;
                }
                values.push(current);
                
                const obj = {};
                rawHeaders.forEach((h, i) => {
                    const normalizedHeader = h.toLowerCase();
                    const key = keyMap[normalizedHeader] || normalizedHeader;
                    obj[key] = (values[i] || '').replace(/"/g, '').trim();
                });
                return obj;
            }).filter(p => p.status && p.status.toLowerCase() === 'publish');
        };

        const extractTOC = (html) => {
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            const headers = Array.from(doc.querySelectorAll('h2, h3'));
            return headers.map((h, i) => {
                const id = `heading-${i}`;
                h.id = id;
                return { id, text: h.innerText, level: h.tagName.toLowerCase() };
            });
        };

        const getUrlPrefix = (post) => {
            if (!post || !post.tipe) return 'post';
            return post.tipe.toLowerCase() === 'page' ? 'page' : 'post';
        };

        // --- Components ---

        const AntiAdblock = () => {
            const [isBlocked, setIsBlocked] = useState(false);
            useEffect(() => {
                const check = () => {
                    const bait = document.createElement('div');
                    bait.className = 'ads-banner ads-google ad-unit';
                    document.body.appendChild(bait);
                    if (bait.offsetHeight === 0) setIsBlocked(true);
                    document.body.removeChild(bait);
                };
                setTimeout(check, 3000);
            }, []);

            if (!isBlocked) return null;
            return (
                <div className="fixed inset-0 z-[999] bg-slate-900/90 backdrop-blur-sm flex items-center justify-center p-6">
                    <div className="bg-white dark:bg-slate-800 p-10 rounded-[2.5rem] max-w-md text-center shadow-2xl">
                        <div className="w-20 h-20 bg-red-500 text-white rounded-full flex items-center justify-center mx-auto mb-8 shadow-xl shadow-red-500/30">
                            <i className="fas fa-hand text-3xl"></i>
                        </div>
                        <h2 className="text-2xl font-black mb-4 uppercase italic tracking-tighter">AdBlock Detected!</h2>
                        <p className="text-slate-500 dark:text-slate-400 mb-8 leading-relaxed font-medium">Mohon nonaktifkan pemblokir iklan Anda untuk membantu kami tetap online dan memberikan konten gratis.</p>
                        <button onClick={() => window.location.reload()} className="w-full py-5 bg-primary-600 text-white rounded-2xl font-black uppercase tracking-widest hover:bg-primary-700 transition-all shadow-lg shadow-primary-500/20">Oke, Saya Matikan</button>
                    </div>
                </div>
            );
        };

        const PostDetail = ({ posts }) => {
            const { slug } = useParams();
            const [content, setContent] = useState('');
            const [toc, setToc] = useState([]);
            const [currentPage, setCurrentPage] = useState(0);
            const post = posts.find(p => p.slug === slug);
            
            const isLocal = !post && (slug === 'about' || slug === 'guide_stup');

            useEffect(() => {
                window.scrollTo(0, 0);
                if (isLocal) {
                    fetch(`/${slug}.md`).then(r => r.text()).then(t => {
                        const html = marked.parse(t);
                        setContent(html); setToc(extractTOC(html));
                    }).catch(() => setContent('<p>File tidak ditemukan.</p>'));
                } else if (post) {
                    const rawHtml = marked.parse(post.body || '');
                    const pages = rawHtml.split('<!--nextpage-->');
                    setContent(pages[currentPage] || pages[0]);
                    setToc(extractTOC(rawHtml));
                    document.title = `${post.judul} - SheetBlog Pro`;
                }
            }, [slug, isLocal, post, currentPage]);

            if (!post && !isLocal) return (
                <div className="py-40 text-center">
                    <h2 className="font-black text-slate-300 italic text-4xl mb-4 uppercase">404 NOT FOUND</h2>
                    <p className="text-slate-500 font-medium italic">Maaf, konten yang Anda cari tidak tersedia.</p>
                    <Link to="/" className="inline-block mt-8 px-8 py-3 bg-primary-600 text-white rounded-xl font-black uppercase tracking-widest text-[10px]">Kembali ke Beranda</Link>
                </div>
            );

            const related = posts.filter(p => p.tipe && p.tipe.toLowerCase() === 'post' && p.slug !== slug && p.label === post?.label).slice(0, 3);
            const currentIndex = posts.findIndex(p => p.slug === slug);
            const prevP = posts[currentIndex - 1];
            const nextP = posts[currentIndex + 1];

            return (
                <div className="max-w-7xl mx-auto px-4 py-16 flex flex-col lg:flex-row gap-16">
                    <article className="flex-grow max-w-4xl">
                        <div className="flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-slate-400 mb-8">
                            <Link to="/" className="hover:text-primary-500">Beranda</Link>
                            <i className="fas fa-chevron-right text-[8px]"></i>
                            <span className="text-primary-500 truncate">{post?.judul || slug}</span>
                        </div>

                        <h1 className="text-4xl md:text-7xl font-black mb-10 leading-none tracking-tighter uppercase italic">{post?.judul || slug}</h1>
                        
                        {(post?.gambar || !isLocal) && (
                            <img src={post?.gambar || 'https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d'} className="w-full aspect-[21/9] object-cover rounded-[2.5rem] shadow-2xl mb-16 border dark:border-slate-800" alt="Hero" />
                        )}
                        
                        {toc.length > 0 && (
                            <div className="bg-white dark:bg-slate-800 p-8 rounded-3xl border dark:border-slate-700 mb-12 shadow-sm">
                                <h4 className="text-sm font-black uppercase tracking-[0.2em] text-slate-400 mb-6 flex items-center gap-3">
                                    <div className="w-6 h-6 bg-primary-500 rounded-md flex items-center justify-center text-white text-[10px]"><i className="fas fa-list"></i></div> Daftar Isi
                                </h4>
                                <ul className="space-y-4">
                                    {toc.map(item => (
                                        <li key={item.id} className={`${item.level === 'h3' ? 'ml-6' : ''}`}>
                                            <a href={`#${item.id}`} className="text-sm font-bold hover:text-primary-500 transition line-clamp-1 flex items-center gap-3 group">
                                                <div className="w-1.5 h-1.5 rounded-full bg-slate-300 group-hover:bg-primary-500"></div> {item.text}
                                            </a>
                                        </li>
                                    ))}
                                </ul>
                            </div>
                        )}

                        <div className="prose prose-xl prose-slate dark:prose-invert max-w-none prose-p:leading-loose prose-h2:italic prose-h2:uppercase prose-h2:font-black prose-h2:tracking-tighter" dangerouslySetInnerHTML={{ __html: content }} />

                        {post?.body && post.body.includes('<!--nextpage-->') && (
                            <div className="flex items-center justify-center gap-4 mt-16 p-8 bg-white dark:bg-slate-800 rounded-3xl shadow-sm">
                                <span className="text-xs font-black uppercase tracking-widest text-slate-400 mr-4 italic">Halaman:</span>
                                {post.body.split('<!--nextpage-->').map((_, i) => (
                                    <button key={i} onClick={() => setCurrentPage(i)} className={`w-12 h-12 rounded-2xl font-black transition-all ${currentPage === i ? 'bg-primary-600 text-white scale-110 shadow-lg' : 'bg-slate-100 dark:bg-slate-900 hover:bg-primary-50'}`}>{i + 1}</button>
                                ))}
                            </div>
                        )}

                        <div className="grid grid-cols-1 md:grid-cols-2 gap-8 mt-24 border-t dark:border-slate-800 pt-16">
                            {prevP && (
                                <Link to={`/${getUrlPrefix(prevP)}/${prevP.slug}`} className="group p-8 bg-white dark:bg-slate-800 rounded-[2.5rem] border dark:border-slate-700 hover:shadow-2xl transition-all">
                                    <span className="text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-4 italic">Sebelumnya</span>
                                    <span className="text-xl font-black group-hover:text-primary-500 transition leading-tight line-clamp-2 uppercase italic">{prevP.judul}</span>
                                </Link>
                            )}
                            {nextP && (
                                <Link to={`/${getUrlPrefix(nextP)}/${nextP.slug}`} className="group p-8 bg-white dark:bg-slate-800 rounded-[2.5rem] border dark:border-slate-700 hover:shadow-2xl transition-all text-right">
                                    <span className="text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-4 italic">Berikutnya</span>
                                    <span className="text-xl font-black group-hover:text-primary-500 transition leading-tight line-clamp-2 uppercase italic">{nextP.judul}</span>
                                </Link>
                            )}
                        </div>

                        {related.length > 0 && (
                            <div className="mt-24">
                                <h3 className="text-2xl font-black uppercase tracking-tighter italic mb-10 flex items-center gap-6">
                                    Artikel Terkait <div className="h-px bg-slate-200 dark:bg-slate-800 flex-grow"></div>
                                </h3>
                                <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                                    {related.map(r => (
                                        <Link key={r.slug} to={`/${getUrlPrefix(r)}/${r.slug}`} className="group">
                                            <div className="aspect-[16/10] rounded-3xl overflow-hidden mb-6 shadow-md border dark:border-slate-700">
                                                <img src={r.gambar} className="w-full h-full object-cover group-hover:scale-110 transition duration-700" alt={r.judul} />
                                            </div>
                                            <h4 className="font-black text-sm leading-snug group-hover:text-primary-500 transition line-clamp-2 uppercase italic">{r.judul}</h4>
                                        </Link>
                                    ))}
                                </div>
                            </div>
                        )}
                    </article>

                    <aside className="lg:w-96 flex-shrink-0">
                        <div className="sticky-widget space-y-10">
                            <div className="p-10 bg-slate-900 rounded-[2.5rem] text-white shadow-2xl relative overflow-hidden group">
                                <h4 className="text-2xl font-black mb-4 italic uppercase tracking-tighter">Newsletter</h4>
                                <p className="text-sm text-slate-400 mb-10 leading-relaxed font-medium">Berlangganan untuk update eksklusif.</p>
                                <input type="email" placeholder="Email Anda..." className="w-full px-6 py-4 bg-white/5 border border-white/10 rounded-2xl mb-4 text-sm outline-none focus:border-primary-500 transition" />
                                <button className="w-full py-4 bg-primary-600 text-white rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-primary-500 transition shadow-lg">Subscribe Now</button>
                            </div>
                            
                            <div className="ad-placeholder h-[500px] rounded-[2.5rem] flex items-center justify-center text-[10px] font-black uppercase tracking-[0.5em] text-slate-400 [writing-mode:vertical-lr] border dark:border-slate-800">
                                Advertisement Spot
                            </div>
                        </div>
                    </aside>
                </div>
            );
        };

        const Home = ({ posts }) => {
            const [page, setPage] = useState(1);
            const [layout, setLayout] = useState('grid');
            const perPage = 6;
            const blogPosts = useMemo(() => posts.filter(p => p.tipe && p.tipe.toLowerCase() === 'post'), [posts]);
            const totalPages = Math.ceil(blogPosts.length / perPage);
            const displayPosts = blogPosts.slice(0, page * perPage);

            return (
                <div className="py-20">
                    <header className="text-center max-w-4xl mx-auto mb-32 space-y-8">
                        <div className="inline-block px-6 py-2 bg-primary-50 dark:bg-primary-900/30 text-primary-600 text-[10px] font-black uppercase tracking-[0.4em] rounded-full border border-primary-100 dark:border-primary-900/50 italic">SheetBlog Pro Hybrid CMS</div>
                        <h1 className="text-6xl md:text-9xl font-black tracking-tighter uppercase leading-none italic">Think <span className="text-primary-600">Faster.</span> <br/> Publish Better.</h1>
                        <p className="text-slate-500 dark:text-slate-400 font-medium text-lg max-w-2xl mx-auto italic leading-relaxed">Kelola konten melalui Google Sheets. Performa website premium yang super ringan.</p>
                        
                        <div className="flex items-center justify-center gap-4 mt-12">
                            <button onClick={() => setLayout('grid')} className={`w-12 h-12 rounded-2xl flex items-center justify-center transition-all ${layout === 'grid' ? 'bg-primary-600 text-white shadow-lg' : 'bg-white dark:bg-slate-800 text-slate-400'}`}><i className="fas fa-grid-2"></i></button>
                            <button onClick={() => setLayout('list')} className={`w-12 h-12 rounded-2xl flex items-center justify-center transition-all ${layout === 'list' ? 'bg-primary-600 text-white shadow-lg' : 'bg-white dark:bg-slate-800 text-slate-400'}`}><i className="fas fa-list"></i></button>
                        </div>
                    </header>

                    {blogPosts.length === 0 ? (
                        <div className="text-center py-20 bg-white dark:bg-slate-800 rounded-[3rem] border-2 border-dashed border-slate-200 dark:border-slate-700">
                            <i className="fas fa-folder-open text-5xl text-slate-200 mb-6 block"></i>
                            <h3 className="font-black text-2xl uppercase italic tracking-tighter">Belum Ada Artikel</h3>
                            <p className="text-slate-500 italic mt-2">Pastikan kolom "Status" di Google Sheets berisi "Publish" dan "Tipe" berisi "Post".</p>
                        </div>
                    ) : (
                        <>
                            <div className={layout === 'grid' ? "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-12" : "flex flex-col gap-10 max-w-5xl mx-auto"}>
                                {displayPosts.map((post, i) => (
                                    <article key={i} className={`group bg-white dark:bg-slate-800 rounded-[3rem] overflow-hidden shadow-sm border dark:border-slate-700 flex hover:shadow-2xl transition-all duration-700 hover:-translate-y-4 ${layout === 'grid' ? 'flex-col h-full' : 'flex-col md:flex-row items-center p-6'}`}>
                                        <Link to={`/${getUrlPrefix(post)}/${post.slug}`} className={`overflow-hidden relative ${layout === 'grid' ? 'aspect-[4/3] w-full' : 'aspect-video w-full md:w-80 rounded-[2rem]'}`}>
                                            <img src={post.gambar || 'https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d'} alt={post.judul} className="w-full h-full object-cover group-hover:scale-110 transition duration-1000" />
                                            <div className="absolute inset-0 bg-black/20 group-hover:bg-transparent transition duration-500"></div>
                                            <div className="absolute bottom-6 left-6 px-4 py-2 bg-white/90 backdrop-blur rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-xl">{post.label}</div>
                                        </Link>
                                        <div className={`flex flex-col flex-grow ${layout === 'grid' ? 'p-10' : 'p-8'}`}>
                                            <h2 className="text-2xl font-black mb-6 line-clamp-2 leading-tight group-hover:text-primary-600 transition uppercase italic tracking-tighter">{post.judul}</h2>
                                            <p className="text-slate-500 dark:text-slate-400 text-sm font-medium line-clamp-3 mb-10 flex-grow leading-relaxed italic">{post.desc}</p>
                                            <Link to={`/${getUrlPrefix(post)}/${post.slug}`} className="flex items-center gap-6 text-[10px] font-black text-primary-600 uppercase tracking-[0.3em] group/btn">
                                                Selengkapnya <div className="h-px bg-primary-100 dark:bg-primary-900/50 flex-grow group-hover/btn:bg-primary-500 transition"></div> <i className="fas fa-arrow-right-long group-hover/btn:translate-x-2 transition"></i>
                                            </Link>
                                        </div>
                                    </article>
                                ))}
                            </div>

                            {page < totalPages && (
                                <div className="mt-32 text-center">
                                    <button onClick={() => setPage(p => p + 1)} className="px-14 py-6 bg-slate-900 text-white rounded-[2.5rem] font-black uppercase tracking-[0.5em] text-[10px] hover:bg-primary-600 transition-all shadow-2xl hover:scale-105 active:scale-95">Load More Articles</button>
                                </div>
                            )}
                        </>
                    )}
                </div>
            );
        };

        const App = () => {
            const [posts, setPosts] = useState([]);
            const [loading, setLoading] = useState(true);
            const [darkMode, setDarkMode] = useState(localStorage.theme === 'dark');
            const [isMenuOpen, setIsMenuOpen] = useState(false);

            useEffect(() => {
                const fetchPosts = async () => {
                    try {
                        const response = await fetch(`${DEFAULT_CSV_URL}&t=${Date.now()}`);
                        const text = await response.text();
                        const parsedData = parseCSV(text);
                        setPosts(parsedData.reverse());
                    } catch (error) {
                        console.error("Gagal memuat data:", error);
                    } finally {
                        setLoading(false);
                    }
                };
                fetchPosts();
            }, []);

            useEffect(() => {
                document.documentElement.classList.toggle('dark', darkMode);
                localStorage.theme = darkMode ? 'dark' : 'light';
            }, [darkMode]);

            if (loading) return (
                <div className="h-screen flex flex-col items-center justify-center gap-12 bg-slate-50 dark:bg-slate-900">
                    <div className="relative w-24 h-24">
                        <div className="absolute inset-0 border-8 border-primary-100 dark:border-primary-900 rounded-full"></div>
                        <div className="absolute inset-0 border-8 border-primary-600 border-t-transparent rounded-full animate-spin"></div>
                    </div>
                    <div className="text-[10px] font-black uppercase tracking-[1em] text-primary-600 animate-pulse italic">Memuat Konten...</div>
                </div>
            );

            return (
                <BrowserRouter>
                    <AntiAdblock />
                    
                    <header className="sticky top-0 z-50 bg-white/70 dark:bg-slate-900/70 backdrop-blur-2xl border-b border-slate-200 dark:border-slate-800">
                        <div className="container mx-auto px-4 flex items-center justify-between h-24">
                            <div className="flex items-center gap-16">
                                <Link to="/" className="text-3xl font-black italic tracking-tighter flex items-center gap-3">
                                    <div className="w-10 h-10 bg-primary-600 rounded-xl flex items-center justify-center text-white text-lg not-italic shadow-lg shadow-primary-500/30">S</div>
                                    SheetBlog<span className="text-primary-600">Pro.</span>
                                </Link>
                                <nav className="hidden lg:flex items-center space-x-12 text-[10px] font-black uppercase tracking-[0.3em] text-slate-500">
                                    <Link to="/" className="hover:text-primary-600 transition">Beranda</Link>
                                    <Link to="/page/about" className="hover:text-primary-600 transition">About</Link>
                                    <Link to="/page/guide_stup" className="hover:text-primary-600 transition">Panduan</Link>
                                </nav>
                            </div>
                            <div className="flex items-center gap-6">
                                <button onClick={() => setDarkMode(!darkMode)} className="w-12 h-12 rounded-2xl bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-500 hover:scale-110 transition shadow-sm border dark:border-slate-700">
                                    <i className={`fas ${darkMode ? 'fa-sun text-yellow-500' : 'fa-moon'}`}></i>
                                </button>
                                <button onClick={() => setIsMenuOpen(true)} className="lg:hidden w-12 h-12 rounded-2xl bg-primary-600 text-white flex items-center justify-center shadow-lg shadow-primary-500/30">
                                    <i className="fas fa-bars-staggered"></i>
                                </button>
                            </div>
                        </div>
                    </header>

                    {isMenuOpen && (
                        <div className="fixed inset-0 z-[100] bg-black/80 backdrop-blur-md lg:hidden" onClick={() => setIsMenuOpen(false)}>
                            <div className="absolute right-0 top-0 h-full w-full max-w-sm bg-white dark:bg-slate-900 p-12 shadow-2xl" onClick={e => e.stopPropagation()}>
                                <div className="flex justify-between items-center mb-24">
                                    <span className="font-black uppercase tracking-[0.4em] text-primary-600 text-xs italic">SheetBlog Pro</span>
                                    <button onClick={() => setIsMenuOpen(false)} className="w-14 h-14 rounded-2xl bg-slate-100 dark:bg-slate-800 text-slate-500"><i className="fas fa-xmark text-xl"></i></button>
                                </div>
                                <div className="flex flex-col space-y-12 text-4xl font-black uppercase tracking-tighter italic">
                                    <Link to="/" onClick={() => setIsMenuOpen(false)} className="hover:text-primary-600 transition">Beranda</Link>
                                    <Link to="/page/about" onClick={() => setIsMenuOpen(false)} className="hover:text-primary-600 transition">About</Link>
                                    <Link to="/page/guide_stup" onClick={() => setIsMenuOpen(false)} className="hover:text-primary-600 transition">Panduan</Link>
                                </div>
                            </div>
                        </div>
                    )}

                    <main className="container mx-auto px-4 min-h-screen">
                        <Routes>
                            <Route path="/" element={<Home posts={posts} />} />
                            <Route path="/post/:slug" element={<PostDetail posts={posts} />} />
                            <Route path="/page/:slug" element={<PostDetail posts={posts} />} />
                            <Route path="*" element={<Navigate to="/" />} />
                        </Routes>
                    </main>

                    <footer className="bg-white dark:bg-slate-950 border-t border-slate-200 dark:border-slate-800 pt-32 pb-16 mt-32">
                        <div className="container mx-auto px-4 grid grid-cols-1 md:grid-cols-4 gap-24">
                            <div className="md:col-span-2">
                                <Link to="/" className="text-4xl font-black italic tracking-tighter block mb-10 uppercase">SheetBlog<span className="text-primary-600">.</span></Link>
                                <p className="text-slate-500 dark:text-slate-400 max-w-sm font-medium leading-loose text-lg italic">Platform blog statis tercepat di dunia dengan sistem database Google Sheets.</p>
                            </div>
                            <div>
                                <h4 className="text-[10px] font-black uppercase tracking-[0.5em] mb-10 text-primary-600">Tautan</h4>
                                <ul className="space-y-6 text-sm font-bold uppercase tracking-widest text-slate-400">
                                    <li><Link to="/" className="hover:text-primary-600 transition">Beranda</Link></li>
                                    <li><Link to="/page/about" className="hover:text-primary-600 transition">About</Link></li>
                                    <li><Link to="/page/guide_stup" className="hover:text-primary-600 transition">Panduan</Link></li>
                                </ul>
                            </div>
                        </div>
                        <div className="container mx-auto px-4 mt-32 pt-16 border-t dark:border-slate-900 text-center text-[10px] font-black uppercase tracking-[1em] text-slate-400">
                            &copy; {new Date().getFullYear()} SheetBlog Studio.
                        </div>
                    </footer>
                </BrowserRouter>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
